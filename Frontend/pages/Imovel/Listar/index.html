<html>
    <body>
        <h2>Página de listar Inquilino</h2>
        <div>
            <h3>Busca Avançada</h3>
            <input type="text" id="inputAvancado">
            <button>Buscar</button>
        </div>
        <table id="tabelaImovel">
            <tr>
                <th>ID</th>
                <th>Proprietario</th>
                <th>Corretor</th>
                <th>Alugado</th>
                <th>Valor</th>
                <th>Visualizar</th>
                <th>Editar</th>
                <th>Deletar</th>
            </tr>
        </table>
        <script>
            $.post("/listarImoveisView")
            .done(function( data ) {
                console.log(data);
                data.forEach(imovel => {
                    const tr = document.createElement('tr');
                    $("#tabelaImovel").append(
                        $("<tr>").append(
                            $("<td>").text(imovel.id),
                            $("<td>").text(imovel.proprietario),
                            $("<td>").text(imovel.corretor),
                            $("<td>").text(imovel.alugado ? "Sim" : "Não"),
                            $("<td>").text(`R$ ${imovel.valor.toString().replace(".", ",")}`),
                            $("<td>").append(
                                $("<button>").text("Visualizar").click(
                                    function(){
                                        visualizarImovel(imovel.id);
                                    }
                                ),
                            ),
                            $("<td>").append(
                                $("<button>").text("Editar").click(
                                    function(){
                                        editarImovel(imovel.id);
                                    }
                                ),
                            ),
                            $("<td>").append(
                                $("<button>").text("Deletar").click(
                                    function(){
                                        deletarImovel(imovel.id);
                                    }
                                ),
                            ),
                        )
                    )
                });
            });

            function visualizarImovel(id){
                $(function(){
                    localStorage.setItem('imovelId', id);
                    $("#subView").load("/Imovel/Visualizar/index.html"); 
                });
            }

            function editarImovel(id){
                $(function(){
                    localStorage.setItem('imovelId', id);
                    $("#subView").load("/Imovel/Atualizar/index.html"); 
                });
            }

            function deletarImovel(id){
                $(function(){
                    $.post("/deletarImovel", {id: id})
                    .done(function( data ) {
                        $("#subView").load("/Imovel/Listar/index.html"); 
                    });
                });
            }
        </script>
    </body>
</html>